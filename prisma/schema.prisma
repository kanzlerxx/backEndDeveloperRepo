generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PG_HOST")
}

model bookmark_content {
  id                                                                Int             @id @default(autoincrement())
  user_id                                                           Int
  bookmark_name                                                     String?         @db.VarChar(150)
  color                                                             String?         @db.VarChar(50)
  bookmark_list_id                                                  Int?
  bookmark_list_bookmark_content_bookmark_list_idTobookmark_list    bookmark_list?  @relation("bookmark_content_bookmark_list_idTobookmark_list", fields: [bookmark_list_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                                                             users           @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bookmark_list_bookmark_list_bookmark_content_idTobookmark_content bookmark_list[] @relation("bookmark_list_bookmark_content_idTobookmark_content")
}

model bookmark_list {
  id                                                                   Int                @id @default(autoincrement())
  bookmark_content_id                                                  Int?
  threads_id                                                           Int
  bookmark_content_bookmark_content_bookmark_list_idTobookmark_list    bookmark_content[] @relation("bookmark_content_bookmark_list_idTobookmark_list")
  bookmark_content_bookmark_list_bookmark_content_idTobookmark_content bookmark_content?  @relation("bookmark_list_bookmark_content_idTobookmark_content", fields: [bookmark_content_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads                                                              threads            @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model categories {
  id              Int     @id @default(autoincrement())
  categories_name String  @unique @db.VarChar(100)
  forum           forum[]
}

model comments {
  id              Int        @id @default(autoincrement())
  user_id         Int
  comment_desc    String
  threads_id      Int
  bind_to_comment Int?
  comments        comments?  @relation("commentsTocomments", fields: [bind_to_comment], references: [id], onUpdate: NoAction)
  other_comments  comments[] @relation("commentsTocomments")
  threads         threads    @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users           users      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model follow {
  id                 Int   @id @default(autoincrement())
  user_id            Int
  following_forum_id Int
  forum              forum @relation(fields: [following_forum_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users              users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, following_forum_id])
}

model forum {
  id                   Int         @id @default(autoincrement())
  user_id              Int?
  forum_title          String      @db.VarChar(255)
  forum_description    String?
  forum_profile        String?     @db.VarChar(255)
  forum_total_follower Int?        @default(0)
  forum_banner         String?     @db.VarChar(255)
  forum_total_threads  Int?        @default(0)
  id_categories        Int?
  follow               follow[]
  categories           categories? @relation(fields: [id_categories], references: [id], onUpdate: NoAction)
  users                users?      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  threads              threads[]
}

model hashtags {
  id               Int                @id @default(autoincrement())
  hashtags_name    String             @unique @db.VarChar(100)
  threads_hashtags threads_hashtags[]
}

model likes {
  id         Int     @id @default(autoincrement())
  user_id    Int
  threads_id Int
  threads    threads @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users      users   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, threads_id])
}

model threads {
  id                  Int                @id @default(autoincrement())
  user_id             Int
  threads_title       String             @db.VarChar(255)
  threads_thumbnail   String?            @db.VarChar(255)
  threads_description String?            @db.VarChar(255)
  threads_concern     String?            @db.VarChar(100)
  forum_id            Int
  bookmark_list       bookmark_list[]
  comments            comments[]
  likes               likes[]
  forum               forum              @relation(fields: [forum_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users               users              @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads_hashtags    threads_hashtags[]
}

model threads_hashtags {
  threads_id  Int
  hashtags_id Int
  hashtags    hashtags @relation(fields: [hashtags_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads     threads  @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([threads_id, hashtags_id])
}

model users {
  id               Int                @id @default(autoincrement())
  username         String?            @db.VarChar(50)
  email            String             @unique(map: "unique_email") @db.VarChar(255)
  password         String             @db.VarChar(255)
  profile_image    String?            @db.VarChar(300)
  bio              String?
  status           Boolean?           @default(false)
  report           Int?               @db.SmallInt
  duration         DateTime?          @db.Timestamptz(6)
  created_at       DateTime?          @default(now()) @db.Timestamptz(6)
  bookmark_content bookmark_content[]
  comments         comments[]
  follow           follow[]
  forum            forum[]
  likes            likes[]
  threads          threads[]
}
