generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PG_HOST")
}

model bookmark_content {
  id                                                                Int             @id @default(autoincrement())
  user_id                                                           Int
  bookmark_name                                                     String?         @db.VarChar(150)
  color                                                             String?         @db.VarChar(50)
  users                                                             users           @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bookmark_list_bookmark_list_bookmark_content_idTobookmark_content bookmark_list[] @relation("bookmark_list_bookmark_content_idTobookmark_content")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model bookmark_list {
  bookmark_content_id                                                  Int
  threads_id                                                           Int
  bookmark_content_bookmark_list_bookmark_content_idTobookmark_content bookmark_content @relation("bookmark_list_bookmark_content_idTobookmark_content", fields: [bookmark_content_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads                                                              threads          @relation(fields: [threads_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([bookmark_content_id, threads_id])
}

model categories {
  id              Int     @id @default(autoincrement())
  categories_name String  @unique @db.VarChar(100)
  forum           forum[]
}

model comments {
  id              Int             @id @default(autoincrement())
  user_id         Int
  comment_desc    String
  threads_id      Int
  bind_to_comment Int?
  uploaded_file   String?         @db.VarChar(255)
  comments        comments?       @relation("commentsTocomments", fields: [bind_to_comment], references: [id], onUpdate: NoAction)
  other_comments  comments[]      @relation("commentsTocomments")
  threads         threads         @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users           users           @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  like_comments   like_comments[]
}

model follow {
  id                 Int   @id @default(autoincrement())
  user_id            Int
  following_forum_id Int
  forum              forum @relation(fields: [following_forum_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users              users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, following_forum_id])
}

model forum {
  id                   Int         @id @default(autoincrement())
  user_id              Int?
  forum_title          String      @db.VarChar(255)
  forum_description    String?
  forum_profile        String?     @db.VarChar(255)
  forum_total_follower Int?        @default(0)
  forum_banner         String?     @db.VarChar(255)
  forum_total_threads  Int?        @default(0)
  id_categories        Int?
  follow               follow[]
  categories           categories? @relation(fields: [id_categories], references: [id], onUpdate: NoAction)
  users                users?      @relation(fields: [user_id], references: [id], onDelete: Cascade)
  threads              threads[]
}

model hashtags {
  id               Int                @id @default(autoincrement())
  hashtags_name    String             @unique @db.VarChar(100)
  threads_hashtags threads_hashtags[]
}

model like_threads {
  id         Int     @id(map: "likes_pkey") @default(autoincrement())
  user_id    Int
  threads_id Int
  threads    threads @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "likes_threads_id_fkey")
  users      users   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "likes_user_id_fkey")

  @@unique([user_id, threads_id], map: "likes_user_id_threads_id_key")
}

model role_users {
  id         Int     @id @default(autoincrement())
  roles_name String? @db.VarChar(10)
  users      users[]
}

model threads {
  id                  Int                @id @default(autoincrement())
  user_id             Int
  threads_title       String             @db.VarChar(255)
  threads_thumbnail   String?            @db.VarChar(255)
  threads_description String?
  threads_concern     String?            @db.VarChar(100)
  forum_id            Int?
  bookmark_list       bookmark_list[]
  comments            comments[]
  like_threads        like_threads[]
  forum               forum?             @relation(fields: [forum_id], references: [id], onUpdate: NoAction)
  users               users              @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads_hashtags    threads_hashtags[]
  threads_images      threads_images[]
}

model threads_hashtags {
  threads_id  Int
  hashtags_id Int
  hashtags    hashtags @relation(fields: [hashtags_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  threads     threads  @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([threads_id, hashtags_id])
}

model users {
  id                                     Int                @id @default(autoincrement())
  username                               String             @unique(map: "unique_username") @db.VarChar(50)
  email                                  String             @unique(map: "unique_email") @db.VarChar(255)
  password                               String             @db.VarChar(255)
  profile_image                          String?            @db.VarChar(300)
  bio                                    String?
  status                                 Boolean?           @default(true)
  created_at                             DateTime?          @default(now()) @db.Timestamptz(6)
  id_role                                Int?               @default(2)
  refresh_token                          String?
  duration                               DateTime?          @db.Timestamptz(6)
  bookmark_content                       bookmark_content[]
  comments                               comments[]
  follow                                 follow[]
  forum                                  forum[]
  like_comments                          like_comments[]
  like_threads                           like_threads[]
  report_report_user_id_report_toTousers report[]           @relation("report_user_id_report_toTousers")
  report_report_user_id_report_byTousers report[]           @relation("report_user_id_report_byTousers")
  threads                                threads[]
  role_users                             role_users?        @relation(fields: [id_role], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "users_roles_fkey")
}

model like_comments {
  user_id    Int
  comment_id Int
  comments   comments @relation(fields: [comment_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users      users    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([user_id, comment_id])
}

model threads_images {
  id                 Int     @id @default(autoincrement())
  threads_id         Int
  threads_images_url String? @db.VarChar(255)
  threads            threads @relation(fields: [threads_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model report {
  id                                    Int     @id @default(autoincrement())
  report_option                         String? @db.VarChar(255)
  report_description                    String? @db.VarChar(500)
  user_id_report_by                     Int?
  user_id_report_to                     Int?
  users_report_user_id_report_toTousers users?  @relation("report_user_id_report_toTousers", fields: [user_id_report_to], references: [id], onDelete: Cascade, map: "report_userd_id_report_to_fkey")
  users_report_user_id_report_byTousers users?  @relation("report_user_id_report_byTousers", fields: [user_id_report_by], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "report_users_id_fkey")
}

enum role_user {
  user
  admin
}
